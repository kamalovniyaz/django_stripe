# Выполенное тестовое задание по Django и Stripe

### Основные команды для запуска
- python -m venv/virtualenv env - создать виртуальное окружение
- pip install -r requirements.txt - установка всех зависимостей
- python manage.py makemigrations - создание миграций на основе изменений
- python manage.py migrate - примение миграций
- python manage.py runserver - запуск сервера
### Подробности запуска
- создан суперпользователь (login: admin, password: 1234)
- товары лежат в БД, но также можно реализовать это через сам сайт Stripe
- залогинится через данные суперпользователя для добавления товаров в заказ (модель Order использует user_id)

### Демонстрация работы сервера:
[Ссылка на YouTube](https://youtu.be/OTBwtWTFjBE)

### Бонусные задачи:
- ✅ Запуск используя Docker
- Использование environment variables
- ✅ Просмотр Django Моделей в Django Admin панели
- Запуск приложения на удаленном сервере, доступном для тестирования
- ✅ Модель Order, в которой можно объединить несколько Item и сделать платёж в Stripe на содержимое Order c общей стоимостью всех Items
- Модели Discount, Tax, которые можно прикрепить к модели Order и связать с соответствующими атрибутами при создании платежа в Stripe - в таком случае они корректно отображаются в Stripe Checkout форме. 
- Добавить поле Item.currency, создать 2 Stripe Keypair на две разные валюты и в зависимости от валюты выбранного товара предлагать оплату в соответствующей валюте
- Реализовать не Stripe Session, а Stripe Payment Intent.

### Описание url's:

#### Базовая версия:
- /item/{id} - c помощью которого можно получить простейшую HTML страницу, на которой будет информация о выбранном Item и кнопка Buy. По нажатию на кнопку Buy должен происходит запрос на /buy/{id}, получение session_id и далее  с помощью библиотеки Stripe происходит редирект на Checkout форму stripe.redirectToCheckout(sessionId=session_id) 
- /buy/{id} - c помощью которого можно получить Stripe Session Id для оплаты выбранного Item. 

#### Бонусная версия:
- order/{pk}/ - с помощью которого можно получить все товары добавленные в корзину (заказ)
- add-to-order/{user_id}/{item_id}/ - с помощью которого мы добавляем товары в корзину (заказ), добавление происходит для авторизованного пользователя
- del-from-order/{user_id}/{item_id}/ - с помощью которого мы удаляем товар из корзины (заказа), если его количество == 0
- buy-all-order/{user_id}/ - с помощью которого мы получаем форму оплаты для всех товаров из нашей корзины (заказа)